Summary,Issue Type,Description,Story Points,Priority,Labels
"Sprint 1: Setup y Fundamentos",Epic,"ConfiguraciÃ³n inicial del proyecto Spring Boot 3 con Java 17. Incluye estructura, configuraciÃ³n, manejo de excepciones, documentaciÃ³n de API y catÃ¡logo de categorÃ­as de solo lectura.",,High,epic
"SETUP-01: Crear proyecto Spring Boot 3",Story,"## ðŸŽ¯ Objetivo
Crear el proyecto base con Spring Boot 3.4.12 y Java 17, con todas las dependencias necesarias y estructura de paquetes.

---

## ðŸ“‹ EspecificaciÃ³n funcional

**TecnologÃ­as:**
- Java 17
- Spring Boot 3.4.12
- Maven

**Dependencias requeridas:**
- spring-boot-starter-web
- spring-boot-starter-data-jpa
- spring-boot-starter-validation
- h2 (runtime, desarrollo)
- postgresql (runtime, producciÃ³n)
- lombok
- springdoc-openapi-starter-webmvc-ui (2.3.0+)
- spring-boot-starter-test (test)

**Estructura de paquetes:**
```
com.gametierlist/
â”œâ”€â”€ config/
â”œâ”€â”€ controller/
â”œâ”€â”€ dto/request/
â”œâ”€â”€ dto/response/
â”œâ”€â”€ entity/
â”œâ”€â”€ exception/
â”œâ”€â”€ mapper/
â”œâ”€â”€ repository/
â”œâ”€â”€ service/
â””â”€â”€ specification/
```

---

## âœ… Criterios de aceptaciÃ³n

- [ ] Proyecto creado con Spring Initializr o manualmente
- [ ] pom.xml con todas las dependencias listadas
- [ ] Estructura de paquetes creada (pueden estar vacÃ­os)
- [ ] application.yml con configuraciÃ³n base (nombre app, puerto, perfil activo)
- [ ] La aplicaciÃ³n arranca sin errores: mvn spring-boot:run

---

## ðŸ”— Referencias

| Concepto | Documento |
|----------|-----------|
| Java 17 requerido | SPRINGBOOT2-A-SPRINGBOOT3.md - SecciÃ³n 2 |
| springdoc v2 | SPRINGBOOT2-A-SPRINGBOOT3.md - SecciÃ³n 9 |

---

## ðŸ’¡ Pistas

1. Usa https://start.spring.io para generar el proyecto base
2. En pom.xml: <java.version>17</java.version>
3. El application.yml bÃ¡sico solo necesita nombre de app y puerto

---

## ðŸ“– CÃ³digo de referencia

Ver: SPRINT-1-soluciones.md â†’ SETUP-01",3,High,"backend,setup,sprint1"
"SETUP-02: Configurar perfil de desarrollo (H2)",Story,"## ðŸŽ¯ Objetivo
Configurar H2 como base de datos en memoria para desarrollo, con consola web habilitada y logging de SQL.

---

## ðŸ“‹ EspecificaciÃ³n funcional

**Archivo:** application-dev.yml

**ConfiguraciÃ³n requerida:**
- Datasource H2 en memoria: jdbc:h2:mem:gametierlist
- Consola H2 habilitada en /h2-console
- DDL auto en create-drop (recrea esquema cada reinicio)
- SQL logging habilitado para debugging
- EjecuciÃ³n de data.sql al arrancar

---

## âœ… Criterios de aceptaciÃ³n

- [ ] Archivo application-dev.yml creado en src/main/resources
- [ ] H2 console accesible en http://localhost:8080/h2-console
- [ ] ConexiÃ³n funciona con JDBC URL: jdbc:h2:mem:gametierlist
- [ ] Los logs muestran las queries SQL formateadas
- [ ] El perfil dev se activa por defecto

---

## ðŸ”— Referencias

| Concepto | Documento |
|----------|-----------|
| ConfiguraciÃ³n JPA | SPRINGBOOT2-A-SPRINGBOOT3.md - SecciÃ³n 5 |
| Hibernate 6 logging | SPRINGBOOT2-A-SPRINGBOOT3.md - SecciÃ³n 9 |

---

## ðŸ’¡ Pistas

1. spring.profiles.active: dev en application.yml activa el perfil
2. Para ver parÃ¡metros de queries: org.hibernate.orm.jdbc.bind: TRACE
3. sql.init.mode: always ejecuta data.sql en cada arranque

---

## ðŸ“– CÃ³digo de referencia

Ver: SPRINT-1-soluciones.md â†’ SETUP-02",2,High,"backend,config,sprint1"
"SETUP-03: Configurar CORS",Story,"## ðŸŽ¯ Objetivo
Configurar CORS para permitir peticiones desde el frontend local.

---

## ðŸ“‹ EspecificaciÃ³n funcional

**Clase:** CorsConfig.java en paquete config

**ConfiguraciÃ³n:**
- Rutas: /api/**
- OrÃ­genes permitidos: * (desarrollo)
- MÃ©todos: GET, POST, PUT, DELETE, OPTIONS
- Headers: todos
- Max age: 3600 segundos

---

## âœ… Criterios de aceptaciÃ³n

- [ ] Clase CorsConfig creada con @Configuration
- [ ] Bean WebMvcConfigurer configurado
- [ ] El frontend puede hacer peticiones sin errores de CORS
- [ ] Las peticiones OPTIONS (preflight) responden correctamente

---

## ðŸ’¡ Pistas

1. Implementa WebMvcConfigurer como bean anÃ³nimo o como lambda
2. registry.addMapping() define las rutas afectadas
3. En producciÃ³n cambiarÃ­as allowedOrigins(""*"") por dominios especÃ­ficos

---

## ðŸ“– CÃ³digo de referencia

Ver: SPRINT-1-soluciones.md â†’ SETUP-03",1,High,"backend,config,sprint1"
"SETUP-04: Configurar Swagger/OpenAPI",Story,"## ðŸŽ¯ Objetivo
Configurar SpringDoc OpenAPI para documentaciÃ³n automÃ¡tica de la API.

---

## ðŸ“‹ EspecificaciÃ³n funcional

**Clase:** OpenApiConfig.java en paquete config

**ConfiguraciÃ³n:**
- TÃ­tulo: Game Tierlist API
- VersiÃ³n: 1.0
- DescripciÃ³n del proyecto
- Swagger UI accesible en /swagger-ui.html

---

## âœ… Criterios de aceptaciÃ³n

- [ ] Swagger UI accesible en http://localhost:8080/swagger-ui.html
- [ ] Muestra tÃ­tulo y descripciÃ³n configurados
- [ ] Los endpoints (cuando existan) aparecerÃ¡n agrupados por tags

---

## ðŸ”— Referencias

| Concepto | Documento |
|----------|-----------|
| springdoc v2 | SPRINGBOOT2-A-SPRINGBOOT3.md - SecciÃ³n 9 |

---

## ðŸ’¡ Pistas

1. La dependencia ya estÃ¡ en el pom.xml del SETUP-01
2. Usa clases de io.swagger.v3.oas.models
3. Los tags se definen en los controllers con @Tag

---

## ðŸ“– CÃ³digo de referencia

Ver: SPRINT-1-soluciones.md â†’ SETUP-04",2,Medium,"backend,config,swagger,sprint1"
"SETUP-05: Crear manejador global de excepciones",Story,"## ðŸŽ¯ Objetivo
Implementar manejo centralizado de errores para devolver respuestas JSON consistentes.

---

## ðŸ“‹ EspecificaciÃ³n funcional

**Clases a crear:**

1. **ErrorResponse** (Record) - DTO de respuesta de error
   - code: String (ej: NOT_FOUND, VALIDATION_ERROR)
   - message: String
   - timestamp: LocalDateTime
   - path: String

2. **EntityNotFoundException** - Cuando no se encuentra un recurso (404)

3. **DuplicateEntityException** - Cuando hay conflicto de unicidad (409)

4. **GlobalExceptionHandler** - Captura y transforma excepciones

**Mapeo de excepciones:**

| ExcepciÃ³n | HTTP Status | CÃ³digo |
|-----------|-------------|--------|
| EntityNotFoundException | 404 | NOT_FOUND |
| DuplicateEntityException | 409 | DUPLICATE_ENTITY |
| MethodArgumentNotValidException | 400 | VALIDATION_ERROR |
| Exception (genÃ©rica) | 500 | INTERNAL_ERROR |

---

## âœ… Criterios de aceptaciÃ³n

- [ ] ErrorResponse implementado como Record de Java 17
- [ ] Todas las excepciones devuelven JSON con el mismo formato
- [ ] Los errores de validaciÃ³n muestran quÃ© campos fallaron
- [ ] El path incluye la URI de la peticiÃ³n que fallÃ³

---

## ðŸ§ª Testing requerido

**Tests unitarios (GlobalExceptionHandlerTest):**
- Verificar que cada excepciÃ³n devuelve el status HTTP correcto
- Verificar que el ErrorResponse tiene el formato esperado

---

## ðŸ”— Referencias

| Concepto | Documento |
|----------|-----------|
| Records | JAVA8-A-JAVA17.md - SecciÃ³n 1 |
| jakarta.servlet | SPRINGBOOT2-A-SPRINGBOOT3.md - SecciÃ³n 1 |

---

## ðŸ’¡ Pistas

1. Record puede tener constructor compacto para aÃ±adir timestamp automÃ¡ticamente
2. @RestControllerAdvice captura excepciones de todos los controllers
3. MethodArgumentNotValidException.getBindingResult() tiene los errores
4. HttpServletRequest.getRequestURI() da el path

---

## ðŸ“– CÃ³digo de referencia

Ver: SPRINT-1-soluciones.md â†’ SETUP-05",3,High,"backend,exception,sprint1"
"SETUP-06: Crear BaseEntity con auditorÃ­a",Story,"## ðŸŽ¯ Objetivo
Crear clase base que todas las entidades hereden, con ID y campos de auditorÃ­a automÃ¡ticos.

---

## ðŸ“‹ EspecificaciÃ³n funcional

**Clases a crear:**

1. **JpaAuditingConfig** - Habilita auditorÃ­a JPA con @EnableJpaAuditing

2. **BaseEntity** - Clase abstracta con:
   - id: Long (autogenerado con IDENTITY)
   - createdAt: LocalDateTime (se rellena al crear, no modificable)
   - updatedAt: LocalDateTime (se actualiza en cada modificaciÃ³n)

---

## âœ… Criterios de aceptaciÃ³n

- [ ] @EnableJpaAuditing configurado en clase de configuraciÃ³n
- [ ] BaseEntity usa @MappedSuperclass
- [ ] createdAt se rellena automÃ¡ticamente al persistir
- [ ] updatedAt se actualiza automÃ¡ticamente al modificar
- [ ] createdAt tiene updatable = false

---

## ðŸ”— Referencias

| Concepto | Documento |
|----------|-----------|
| GenerationType | SPRINGBOOT2-A-SPRINGBOOT3.md - SecciÃ³n 9 |
| jakarta.persistence | SPRINGBOOT2-A-SPRINGBOOT3.md - SecciÃ³n 1 |

---

## ðŸ’¡ Pistas

1. @MappedSuperclass indica que no es tabla pero sus campos se heredan
2. @EntityListeners(AuditingEntityListener.class) activa la auditorÃ­a
3. @CreatedDate y @LastModifiedDate son de Spring Data
4. Usa Lombok @Getter @Setter para reducir boilerplate

---

## ðŸ“– CÃ³digo de referencia

Ver: SPRINT-1-soluciones.md â†’ SETUP-06",2,High,"backend,entity,sprint1"
"CAT-01: Crear entidad Category y datos iniciales",Story,"## ðŸŽ¯ Objetivo
Crear la entidad Category y cargar las 12 categorÃ­as de juegos como datos iniciales.

---

## ðŸ“‹ EspecificaciÃ³n funcional

**Entidad Category:**
- Hereda de BaseEntity
- nombre: String (Ãºnico, mÃ¡ximo 50 caracteres)
- descripcion: String (mÃ¡ximo 255 caracteres, opcional)

**Datos iniciales (12 categorÃ­as):**
AcciÃ³n, Aventura, Carreras, Deportes, Estrategia, Indie, Plataformas, Puzzle, RPG, Shooter, SimulaciÃ³n, Terror

**Repository:**
- findAllByOrderByNombreAsc()
- findByNombre(String nombre)
- existsByNombre(String nombre)

---

## âœ… Criterios de aceptaciÃ³n

- [ ] Entidad Category creada heredando de BaseEntity
- [ ] CategoryRepository creado con los mÃ©todos especificados
- [ ] Archivo data.sql con INSERT de las 12 categorÃ­as
- [ ] Al arrancar, verificar en H2 console que las categorÃ­as existen

---

## ðŸ§ª Testing requerido

**Tests de repositorio (CategoryRepositoryTest con @DataJpaTest):**
- shouldFindAllCategoriesOrderedByName
- shouldFindByNombre

---

## ðŸ”— Referencias

| Concepto | Documento |
|----------|-----------|
| jakarta.persistence | SPRINGBOOT2-A-SPRINGBOOT3.md - SecciÃ³n 1 |
| @DataJpaTest | TESTING.md - SecciÃ³n 6 |

---

## ðŸ’¡ Pistas

1. @Table(name = ""category"") define el nombre de la tabla
2. @Column(unique = true) para el constraint de unicidad
3. data.sql se ejecuta despuÃ©s de crear tablas con ddl-auto: create-drop
4. Spring Data genera implementaciÃ³n de mÃ©todos por convenciÃ³n de nombres

---

## ðŸ“– CÃ³digo de referencia

Ver: SPRINT-1-soluciones.md â†’ CAT-01",2,High,"backend,entity,sprint1"
"CAT-02: Crear endpoints de categorÃ­as",Story,"## ðŸŽ¯ Objetivo
Implementar endpoints de solo lectura para listar y obtener categorÃ­as.

---

## ðŸ“‹ EspecificaciÃ³n funcional

| MÃ©todo | Endpoint | Response |
|--------|----------|----------|
| GET | /api/categories | 200 + Lista de CategoryResponse |
| GET | /api/categories/{id} | 200 + CategoryResponse |
| GET | /api/categories/{id} (no existe) | 404 + ErrorResponse |

**CategoryResponse (Record):**
- id: Long
- nombre: String
- descripcion: String

**Clases a crear:**
- CategoryResponse (dto/response)
- CategoryMapper (mapper)
- CategoryService (service)
- CategoryController (controller)

---

## âœ… Criterios de aceptaciÃ³n

- [ ] GET /api/categories devuelve las 12 categorÃ­as ordenadas alfabÃ©ticamente
- [ ] GET /api/categories/1 devuelve la categorÃ­a con id 1
- [ ] GET /api/categories/999 devuelve 404 con ErrorResponse
- [ ] Endpoints documentados en Swagger con @Tag y @Operation

---

## ðŸ§ª Testing requerido

**Tests unitarios (CategoryServiceTest):**
- shouldReturnAllCategoriesOrdered
- shouldReturnCategoryById
- shouldThrowNotFound_WhenCategoryDoesNotExist

**Tests de controller (CategoryControllerTest con @WebMvcTest):**
- shouldReturn200WithCategories
- shouldReturn404WhenCategoryNotFound

---

## ðŸ”— Referencias

| Concepto | Documento |
|----------|-----------|
| Records | JAVA8-A-JAVA17.md - SecciÃ³n 1 |
| Stream.toList() | JAVA8-A-JAVA17.md - SecciÃ³n 7 |
| @WebMvcTest | TESTING.md - SecciÃ³n 7 |
| AssertJ | TESTING.md - SecciÃ³n 4 |

---

## ðŸ’¡ Pistas

1. PatrÃ³n: Controller â†’ Service â†’ Repository â†’ Entity
2. El Mapper convierte Entity â†” Response
3. @Tag(name = ""Categories"") agrupa endpoints en Swagger
4. @Transactional(readOnly = true) en el Service para queries

---

## ðŸ“– CÃ³digo de referencia

Ver: SPRINT-1-soluciones.md â†’ CAT-02",3,High,"backend,api,sprint1"
